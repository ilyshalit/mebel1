<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ü—Ä–∏–º–µ—Ä–∫–∞ –ú–µ–±–µ–ª–∏</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üõãÔ∏è –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ü—Ä–∏–º–µ—Ä–∫–∞ –ú–µ–±–µ–ª–∏</h1>
            <p class="subtitle">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫ –º–µ–±–µ–ª—å –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤ –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç–µ</p>
        </header>

        <main>
            <!-- –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
            <section class="step" id="step1">
                <h2>–®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h2>
                
                <div class="upload-grid">
                    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–Ω–∞—Ç—ã -->
                    <div class="upload-box">
                        <h3>üì∑ –§–æ—Ç–æ –∫–æ–º–Ω–∞—Ç—ã</h3>
                        <div class="drop-zone" id="roomDropZone">
                            <input type="file" id="roomInput" accept="image/*" hidden>
                            <div class="drop-zone-content">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="17 8 12 3 7 8"></polyline>
                                    <line x1="12" y1="3" x2="12" y2="15"></line>
                                </svg>
                                <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                            </div>
                            <img id="roomPreview" class="preview-image" style="display: none;" alt="Room preview">
                        </div>
                    </div>

                    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–±–µ–ª–∏ -->
                    <div class="upload-box">
                        <h3>ü™ë –§–æ—Ç–æ –º–µ–±–µ–ª–∏</h3>
                        <div class="tabs">
                            <button class="tab active" data-tab="upload">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                            <button class="tab" data-tab="catalog">–ò–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</button>
                        </div>
                        
                        <!-- Tab: –ó–∞–≥—Ä—É–∑–∫–∞ -->
                        <div class="tab-content active" id="uploadTab">
                            <div class="drop-zone" id="furnitureDropZone">
                                <input type="file" id="furnitureInput" accept="image/*" hidden>
                                <div class="drop-zone-content">
                                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="17 8 12 3 7 8"></polyline>
                                        <line x1="12" y1="3" x2="12" y2="15"></line>
                                    </svg>
                                    <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–æ—Ç–æ –º–µ–±–µ–ª–∏ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ</p>
                                </div>
                                <img id="furniturePreview" class="preview-image" style="display: none;" alt="Furniture preview">
                            </div>
                        </div>

                        <!-- Tab: –ö–∞—Ç–∞–ª–æ–≥ -->
                        <div class="tab-content" id="catalogTab">
                            <div id="catalogGrid" class="catalog-grid">
                                <p class="empty-catalog">–ö–∞—Ç–∞–ª–æ–≥ –ø—É—Å—Ç. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–µ–±–µ–ª—å –≤—Ä—É—á–Ω—É—é.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- –®–∞–≥ 2: –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è -->
            <section class="step" id="step2" style="display: none;">
                <h2>–®–∞–≥ 2: –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</h2>
                
                <div class="mode-selection">
                    <button class="mode-btn active" id="autoMode">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                            <path d="M2 17l10 5 10-5"></path>
                            <path d="M2 12l10 5 10-5"></path>
                        </svg>
                        <h3>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</h3>
                        <p>AI —Å–∞–º –≤—ã–±–µ—Ä–µ—Ç –ª—É—á—à–µ–µ –º–µ—Å—Ç–æ</p>
                    </button>
                    
                    <button class="mode-btn" id="manualMode">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 9v11a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9"></path>
                            <path d="M9 22V12h6v10M2 10.6L12 2l10 8.6"></path>
                        </svg>
                        <h3>–í—Ä—É—á–Ω—É—é</h3>
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ</p>
                    </button>
                </div>

                <!-- Canvas –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ -->
                <div id="manualSelection" class="manual-selection" style="display: none;">
                    <p class="instruction">–ó–∞–∂–º–∏—Ç–µ –º—ã—à—å –∏ –≤—ã–¥–µ–ª–∏—Ç–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–º –º–µ—Å—Ç–æ, –≥–¥–µ –¥–æ–ª–∂–Ω–∞ —Å—Ç–æ—è—Ç—å –º–µ–±–µ–ª—å</p>
                    <div class="canvas-container">
                        <canvas id="roomCanvas"></canvas>
                    </div>
                    <div class="manual-controls">
                        <div class="rotation-toggle">
                            <span class="toggle-label">–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –º–µ–±–µ–ª–∏:</span>
                            <label class="toggle-option">
                                <input type="radio" name="rotation" value="0" checked>
                                <span>–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ</span>
                            </label>
                            <label class="toggle-option">
                                <input type="radio" name="rotation" value="90">
                                <span>–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ (90¬∞)</span>
                            </label>
                        </div>
                        <div class="rotation-toggle" style="margin-top: 0.75rem;">
                            <span class="toggle-label">–ü–æ—Å—Ç–∞–≤–∏—Ç—å –≤–¥–æ–ª—å —Å—Ç–µ–Ω—ã:</span>
                            <label class="toggle-option">
                                <input type="radio" name="wall" value="auto" checked>
                                <span>–ê–≤—Ç–æ</span>
                            </label>
                            <label class="toggle-option">
                                <input type="radio" name="wall" value="right">
                                <span>–ü—Ä–∞–≤–∞—è</span>
                            </label>
                            <label class="toggle-option">
                                <input type="radio" name="wall" value="left">
                                <span>–õ–µ–≤–∞—è</span>
                            </label>
                            <label class="toggle-option">
                                <input type="radio" name="wall" value="back">
                                <span>–î–∞–ª—å–Ω—è—è</span>
                            </label>
                        </div>
                    </div>
                </div>

                <button class="btn-primary" id="generateBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                    –°–æ–∑–¥–∞—Ç—å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é (Nano Banana Pro üçå)
                </button>
            </section>

            <!-- –®–∞–≥ 3: –†–µ–∑—É–ª—å—Ç–∞—Ç -->
            <section class="step" id="step3" style="display: none;">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
                
                <div id="loadingState" class="loading-state">
                    <div class="spinner"></div>
                    <p>–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é...</p>
                    <p class="loading-substep">–ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å AI...</p>
                </div>

                <div id="resultState" class="result-state" style="display: none;">
                    <div class="result-image-container">
                        <img id="resultImage" alt="Result">
                    </div>

                    <div class="result-info">
                        <p>‚úÖ –ì–æ—Ç–æ–≤–æ –∑–∞ <span id="generationTime">-</span> —Å–µ–∫</p>
                    </div>

                    <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
                    <div id="upsellSection" class="upsell-section">
                        <h3>–¢–∞–∫–∂–µ –≤–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω—Ä–∞–≤–∏—Ç—å—Å—è:</h3>
                        <div id="upsellGrid" class="upsell-grid"></div>
                    </div>

                    <div class="result-actions">
                        <button class="btn-secondary" id="downloadBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            –°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                        </button>
                        <button class="btn-primary" id="tryAgainBtn">
                            –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Powered by GPT-4 Vision + Stable Diffusion</p>
        </footer>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
