# Загрузить обновления и данные на сервер

## 1. Где добавить новые товары в каталог

- **Локально:** открой в браузере **http://localhost:8080/add_to_catalog.html**
- **На сервере:** после деплоя — **https://ваш-домен/add_to_catalog.html**

На странице: название, тип мебели, стиль, описание, цена, фото. После отправки товар попадает в `data/catalog.json` и `data/catalog/` (файл изображения).  
С главной страницы тоже есть ссылка: блок «Популярные Товары» → **«➕ Добавить новый товар в каталог»**.

---

## 2. Закоммитить и отправить код на GitHub

В терминале из **корня проекта** (папка «Примерка мебели»):

```bash
cd "/Users/ilyshalit/Desktop/Примерка мебели"

git status
git add -A
git commit -m "Правки: каталог, админка визитов, правовые страницы, загрузка каталога, деплой"
git push origin main
```

(Если ветка называется `master`, замени на `git push origin master`.)

---

## 3. Скопировать данные на сервер (каталог, визиты — по желанию)

Если ты добавлял товары **локально** и хочешь их видеть на сервере, нужно перенести:

- `data/catalog.json`
- `data/catalog/*.png` (все новые файлы)

С Mac в папку проекта на сервере (подставь свой IP и путь):

```bash
scp data/catalog.json root@<IP_СЕРВЕРА>:/root/app/data/
scp data/catalog/*.png root@<IP_СЕРВЕРА>:/root/app/data/catalog/
```

Если на сервере путь к проекту другой (не `/root/app`), замени его.  
Базу визитов `data/visits.db` обычно не копируют — на сервере она начнёт собираться заново.

---

## 4. На сервере: подтянуть код и перезапустить

Подключись по SSH и обнови приложение:

```bash
ssh root@<IP_СЕРВЕРА>

cd /root/app   # или ваш путь к проекту

git pull origin main
```

Если используешь **Docker**:

```bash
docker compose -f docker-compose.prod.yml up -d --build
```

Если запускаешь **без Docker** (uvicorn + Caddy/Nginx):

```bash
# перезапуск backend (пример для systemd)
sudo systemctl restart furniture-backend

# или вручную: остановить старый процесс и снова запустить uvicorn
```

Проверь, что на сервере есть файл **`.env`** с нужными переменными (в т.ч. `ADMIN_API_KEY`, `KIE_AI_API_KEY` и т.д.). Его в git не кладут — создаётся вручную на сервере.

---

## 5. Проверка после деплоя

- Сайт: **https://ваш-домен** (или http, если без SSL).
- Добавить товар: **https://ваш-домен/add_to_catalog.html**
- Админка визитов: **https://ваш-домен/admin.html** (ввести ключ из `ADMIN_API_KEY`).
- API: **https://ваш-домен/docs** (если проксируете к backend).

После этого все новые данные и обновления будут на сервере.
